const lugaresDeInteresse = {
  novaGameleira: [{
      predio: '12',
      latitude: -19.93987210186824,
      longitude: -43.99839218534868,
      nome: 'Banheiro masculino no prédio 12 - primeiro andar',
    },
    {
      predio: '12',
      latitude: -19.939876408332104,
      longitude: -43.99836209875846,
      nome: 'Banheiro masculino no prédio 12 - segundo andar',
    },

    {
      predio: '12',
      latitude: -19.939876408332104,
      longitude: -43.99836209875846,
      nome: 'Banheiro feminino no prédio 12 - primeiro andar',
    },
    {
      predio: '12',
      latitude: -19.939876408332104,
      longitude: -43.99836209875846,
      nome: 'Banheiro feminino no prédio 12 - segundo andar',
    },
    {
      predio: '12',
      latitude: -19.93986380126551,
      longitude: -43.998299737398995,
      nome: 'Salas de informática do prédio 12',
    },
    {
      predio: '12',
      latitude: -19.939990502239485,
      longitude: -43.99854918283886,
      nome: 'Salas de edificações do prédio 12',
    },
    {
      predio: '08',
      latitude: -19.939497216290164,
      longitude: -43.99881410204808,
      nome: 'Trincabotz',
    },
    {
      predio: '09',
      latitude: -19.939402032683976,
      longitude: -43.99871217810578,
      nome: 'Cefast',
    },
    {
      predio: 'Refeitório Escolar - Bandex',
      latitude: -19.93919149390002,
      longitude: -43.99985815190789,
      nome: 'Refeitório Escolar - bandeijão',
    },
    {
      predio: 'Refeitório Escolar - Bandex',
      latitude: -19.939146108258715,
      longitude: -43.999736111397155,
      nome: 'Banheiro',
    },
    {
      predio: 'Refeitório Escolar - Bandex',
      latitude: -19.939125306501676,
      longitude: -43.99966838561999,
      nome: 'Loja de utilitários e xerox',
    },
    {
      predio: '20',
      latitude: -19.938910985209148,
      longitude: -43.999932583208,
      nome: 'Prédio 20',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Masculino no prédio 20 - 1° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Masculino no prédio 20 - 2° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Masculino no prédio 20 - 3° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Masculino no prédio 20 - 4° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Feminino no prédio 20 - 1° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Feminino no prédio 20 - 2° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Feminino no prédio 20 - 3° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Feminino no prédio 20 - 4° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Feminino no prédio 20 - 1° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Feminino no prédio 20 - 2° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Feminino no prédio 20 - 3° andar',
    },
    {
      predio: '20',
      latitude: -19.938852361980516,
      longitude: -43.999851446385705,
      nome: 'Banheiro Feminino no prédio 20 - 4° andar',
    },
    {
      predio: '12',
      latitude: -19.939852227055187,
      longitude: -43.998451013747086,
      nome: 'Prédio 12',
    },
    {
      predio: '19',
      latitude: -19.939786764249074,
      longitude: -43.999378954054684,
      nome: 'Departamento de Eletrônica e Biomédica - Prédio de Elt (eletrônica)',
    },
    {
      predio: '19',
      latitude: -19.939817651575616,
      longitude: -43.99940577614502,
      nome: 'Banheiro Masculino no prédio 19 - 1° andar',
    },
    {
      predio: '19',
      latitude: -19.93981260874721,
      longitude: -43.99940309393598,
      nome: 'Banheiro Feminino no prédio 19 - 1° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.93906758988952,
      longitude: -43.999289270377965,
      nome: 'Prédio Principal',
    },
    {
      predio: 'Lanchonete',
      latitude: -19.93978061119736,
      longitude: -43.999215611783754,
      nome: 'Lanchonete',
    },
    {
      predio: 'Biblioteca',
      latitude: -19.939413114563834,
      longitude: -43.99943823513284,
      nome: 'Biblioteca',
    },
    {
      predio: 'Principal',
      latitude: -19.939036663396557,
      longitude: -43.99934145870826,
      nome: 'Departamento de Ciências Sociais Aplicadas',
    },
    {
      predio: 'Principal',
      latitude: -19.939036663396557,
      longitude: -43.99934145870826,
      nome: 'Núcleo de Tecnologia de Informação',
    },
    {
      predio: '20',
      latitude: 33,
      longitude: 12,
      nome: 'Lanchonete',
    },
    {
      predio: 'Biblioteca',
      latitude: 33,
      longitude: 12,
      nome: 'Biblioteca',
    },
    /*
    {
      predio: 'Biblioteca',
      latitude: 33,
      longitude: 12,
      nome: 'Departamento de Educação',
    },
        {
      predio: 'Biblioteca',
      latitude: 33,
      longitude: 12,
      nome: 'Departamento de Engenharia Civil',
    },
        {
      predio: 'Biblioteca',
      latitude: 33,
      longitude: 12,
      nome: 'Departamento de Engenharia Elétrica',
    },

    {
      predio: 'Biblioteca',
      latitude: 33,
      longitude: 12,
      nome: 'Departamento de Fisíca',
    },
        {
      predio: 'Biblioteca',
      latitude: 33,
      longitude: 12,
      nome: 'Departamento de Matemática',
    },
    */
    {
      predio: 'Principal',
      latitude: -19.93919803461888,
      longitude: -43.998837203410396,
      nome: 'Departamento de Engenharia Mecânica',
    },
    {
      predio: 'Principal',
      latitude: -19.93873787405462,
      longitude: -43.9987594193494,
      nome: 'Caixa',
    },
    {
      predio: '20',
      latitude: -19.938977825631213,
      longitude: -43.9999934927818,
      nome: 'Achados e perdidos',
    },
    {
      predio: '20',
      latitude: -19.93887885956686,
      longitude: -43.99979903262715,
      nome: 'Assistência ao aluno',
    },
    {
      predio: '20',
      latitude: -19.938859318486116,
      longitude: -43.99976215225419,
      nome: 'Secretaria',
    },
    {
      predio: 'Principal',
      latitude: -19.938821081269026,
      longitude: -43.99881172242553,
      nome: 'Secretaria',
    },
    {
      predio: 'Principal',
      latitude: -19.93865340607859,
      longitude: -43.99908128443195,
      nome: 'Fila do Intercampi',
    },
    {
      predio: '20',
      latitude: -19.938833688421035,
      longitude: -43.99979139926905,
      nome: 'Sala dos Professores - 2° andar',
    },
    {
      predio: '20',
      latitude: -19.93890680987047,
      longitude: -43.99988527658518,
      nome: 'Sala da coordenação - 1° andar',
    },
    {
      predio: '20',
      latitude: -19.93885575093089,
      longitude: -43.99981755080712,
      nome: 'Auditório 1 - 2° andar',
    },
    {
      predio: '20',
      latitude: -19.93885070807176,
      longitude: -43.99978201153745,
      nome: 'Auditório 2 - 2° andar',
    },
    {
      predio: '20',
      latitude: -19.939028468758718,
      longitude: -44.00006632569487,
      nome: 'Auditório - 1° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938612166605928,
      longitude: -43.998802708594745,
      nome: 'Achados e perdidos',
    },
    {
      predio: 'Principal',
      latitude: -19.938658813117144,
      longitude: -43.998833553998615,
      nome: 'Diretoria',
    },
    {
      predio: 'Principal',
      latitude: -19.93893112761634,
      longitude: -43.99870749017338,
      nome: 'DGO - laborátórios de informática',
    },
    {
      predio: 'Principal',
      latitude: -19.938929866901866,
      longitude: -43.99870212575583,
      nome: 'Laboratórios de equipamentos biomédicos',
    },
    {
      predio: 'Principal',
      latitude: -19.93866511670107,
      longitude: -43.99875576993695,
      nome: 'Auditório - 2° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938928606184376,
      longitude: -43.99896230003243,
      nome: 'Banheiros Femininos - 1° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938928606184376,
      longitude: -43.99896230003243,
      nome: 'Banheiros Femininos - 2° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938928606184376,
      longitude: -43.99896230003243,
      nome: 'Banheiros Femininos - 3° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938928606184376,
      longitude: -43.99896230003243,
      nome: 'Banheiros Femininos - 4° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938928606184376,
      longitude: -43.99896230003243,
      nome: 'Banheiros Masculinos - 1° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938928606184376,
      longitude: -43.99896230003243,
      nome: 'Banheiros Masculinos - 2° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938928606184376,
      longitude: -43.99896230003243,
      nome: 'Banheiros Masculinos - 3° andar',
    },
    {
      predio: 'Principal',
      latitude: -19.938928606184376,
      longitude: -43.99896230003243,
      nome: 'Banheiros Masculinos - 4° andar',
    },
    /*<<<<<<< HEAD


    =======
      {
        predio: 'Biblioteca',
        latitude: -19.93949940109882,
        longitude: -43.999733974271564,
        nome: 'Banco do Brasil',
      },
    >>>>>>> master*/
  ],
  novaSuica: [{
      predio: 'principal',
      latitude: -19.930288922152226,
      longitude: -43.97680505927631,
      nome: 'Laboratório de fisíca - 1',
    },
    {
      predio: 'principal',
      latitude: -19.930288922152226,
      longitude: -43.97680505927631,
      nome: 'Laboratório de fisíca - 2',
    },
    /*
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Arte Design e Tecnologia',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Ciência e Tecnologia Ambiental',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Ciências Biólogicas',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Ciências Sociais e Filosofia',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Educação Fisíca e Desporto',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Engenharia de Materiais',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Engenharia de Transportes',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Geociências',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de História',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Linguagem e Tecnólogia',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Química',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Linguagem e Tecnólogia',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Diretoria',
    },
    */
    {
      predio: 'principal',
      latitude: -19.930809624734827,
      longitude: -43.97904738601687,
      nome: 'Sala de Carteirinha e Documentações',
    },
    /*
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Departamento de Linguagem e Tecnólogia',
    },
    {
      predio: 'principal',
      latitude: 33,
      longitude: 33,
      nome: 'Sala de Documentações para Bolsa',
    },
    */
    {
      predio: 'principal',
      latitude: -19.93031265579131,
      longitude: -43.97718571226811,
      nome: 'Sala de Arte - 1',
    },
    {
      predio: 'principal',
      latitude: -19.93031265579131,
      longitude: -43.97718571226811,
      nome: 'Sala de Arte - 2',
    },
    {
      predio: 'principal',
      latitude: -19.929785647639566,
      longitude: -43.976322040962984,
      nome: 'Ginásio',
    },
    {
      predio: 'principal',
      latitude: -19.929616702072018,
      longitude: -43.97631131212685,
      nome: 'Banheiros - Ginásio',
    },
    {
      predio: 'principal',
      latitude: -19.930185316662424,
      longitude: -43.97657953302899,
      nome: 'Banheiros - térreo',
    },
    {
      predio: 'principal',
      latitude: -19.93026222446574,
      longitude: -43.97670827906137,
      nome: 'Banheiros - todos os andares',
    },
    {
      predio: 'principal',
      latitude: -19.930355522411524,
      longitude: -43.97705160181509,
      nome: 'Banheiros - todos os andares',
    },
    {
      predio: 'principal',
      latitude: -19.930729974405928,
      longitude: -43.97865958612058,
      nome: 'Banheiros - todos os andares',
    },
    {
      predio: 'principal',
      latitude: -19.930526988755677,
      longitude: -43.97778384487371,
      nome: 'Banheiros - todos os andares',
    },
    {
      predio: 'principal',
      latitude: -19.929920744727383,
      longitude: -43.97637387429865,
      nome: 'Vestiário feminino',
    },
    {
      predio: 'principal',
      latitude: -19.92988418192725,
      longitude: -43.97624781047413,
      nome: 'Vestiário masculino',
    },

    {
      predio: 'principal',
      latitude: -19.930591947107548,
      longitude: -43.97867837869264,
      nome: 'Refeitório Escolar - Bandeijão',
    },
    {
      predio: 'principal',
      latitude: -19.930583121647093,
      longitude: -43.9780172141678,
      nome: 'Grêmio',
    },
    {
      predio: 'principal',
      latitude: -19.930541242179505,
      longitude: -43.97882080145821,
      nome: 'Biblioteca',
    },
    {
      predio: 'principal',
      latitude: -19.930460552160774,
      longitude: -43.9774931079935,
      nome: 'Enfermaria - Smood',
    },
    {
      predio: 'principal',
      latitude: -19.93026008773399,
      longitude: -43.977945060215454,
      nome: 'Bosque',
    },
    {
      predio: 'principal',
      latitude: -19.93005963938959,
      longitude: -43.97785809280009,
      nome: 'Auditório',
    },
    {
      predio: 'principal',
      latitude: -19.930708942315196,
      longitude: -43.97856217266902,
      nome: 'Ascefet',
    },
    {
      predio: 'principal',
      latitude: -19.929936397606227,
      longitude: -43.97813100756898,
      nome: 'Fila do intercampi',
    },
    {
      predio: 'principal',
      latitude: -19.930476466210152,
      longitude: -43.977725374228456,
      nome: 'Achados e perdidos',
    },
    {
      predio: 'principal',
      latitude: -19.929655695223126,
      longitude: -43.97644528997514,
      nome: 'Achados e perdidos - 2',
    },
    {
      predio: 'principal',
      latitude: -19.930236287123147,
      longitude: -43.97660689306783,
      nome: 'Laboratório de Química - Microbiologia',
    },
    {
      predio: 'principal',
      latitude: -19.930280414541162,
      longitude: -43.97681945813364,
      nome: 'Laboratório de Química - Fisíco-Quimíca',
    },
    {
      predio: 'principal',
      latitude: -19.930335258601954,
      longitude: -43.977001177794435,
      nome: 'Laboratório de Química - Mineralogia',
    },
    {
      predio: 'principal',
      latitude: -19.930342192906974,
      longitude: -43.97701727104863,
      nome: 'Laboratório de Química - Inorgânica',
    },
    {
      predio: 'principal',
      latitude: -19.930364256602733,
      longitude: -43.97711986554412,
      nome: 'Laboratório de Química - Orgânica',
    },
    {
      predio: 'principal',
      latitude: -19.930420361415855,
      longitude: -43.977316337354175,
      nome: 'Laboratório de Química - Analítica',
    },
    {
      predio: 'principal',
      latitude: -19.930381907557766,
      longitude: -43.97721977782901,
      nome: 'Laboratório de Química - Processos Industriais',
    },
    {
      predio: 'principal',
      latitude: -19.930042756727605,
      longitude: -43.97779041779649,
      nome: 'Caixa Econômica',
    },
    {
      predio: 'principal',
      latitude: -19.930603921591366,
      longitude: -43.978565517239346,
      nome: 'Loja',
    },
    {
      predio: 'principal',
      latitude: -19.93062094212876,
      longitude: -43.97865201848064,
      nome: 'Xerox',
    },
    {
      predio: 'principal',
      latitude: -19.930776018054544,
      longitude: -43.97883977311131,
      nome: 'Laboratório de Computadores',
    },
  ],
}

const campoBuscaEl = document.querySelector('#campo-de-busca')
let botaoPesquisaEl = document.querySelector('#botao-pesquisa')
let secaoBuscaEl = document.querySelector('#secao-busca')

botaoPesquisaEl.addEventListener('click', fazPesquisa);
campoBuscaEl.addEventListener('input', fazPesquisa);


function fazPesquisa() {
  // remove marcador da última pesquisa (se tiver sido feita)
  document.querySelectorAll('.marcador-busca').forEach(el => el.classList.remove('visivel'))

  // efetua busca e constrói resultados
  const resultadosEl = document.querySelector('#resultados-da-busca')

  let bodyEl = document.querySelector("body");
  let classeBody = bodyEl.classList;

  let textoDigitado = campoBuscaEl.value.toLowerCase();
  let resultados = []

  if (bodyEl.classList.contains('mostrando-c1')) {
    for (let lugar of lugaresDeInteresse.novaSuica) {
      if (lugar.nome.toLowerCase().indexOf(textoDigitado) !== -1) {
        resultados.push(lugar)
      }
    }
    resultadosEl.querySelector('p').innerHTML = `Encontrados ${resultados.length} resultados`
    const resultadosUlEl = resultadosEl.querySelector('ul')
    resultadosUlEl.innerHTML = ''
    for (let resultado of resultados) {
      resultadosUlEl.innerHTML += `
        <li class="resultado-da-busca">
          ${resultado.nome}
          <button class="btn btn-link mostrar-no-mapa"
            data-latitude="${resultado.latitude}"
            data-longitude="${resultado.longitude}">
            Mostrar no mapa
          </button>
        </li>`
    }

    // click nos botões "Mostrar no mapa"
    resultadosUlEl.addEventListener('click', mostrarNoMapa)

  } else if (bodyEl.classList.contains('mostrando-c2')) {
    for (let lugar of lugaresDeInteresse.novaGameleira) {
      if (lugar.nome.toLowerCase().indexOf(textoDigitado) !== -1) {
        resultados.push(lugar)
      }
    }
    resultadosEl.querySelector('p').innerHTML = `Encontrados ${resultados.length} resultados`
    const resultadosUlEl = resultadosEl.querySelector('ul')
    resultadosUlEl.innerHTML = ''
    for (let resultado of resultados) {
      resultadosUlEl.innerHTML += `
        <li class="resultado-da-busca">
          ${resultado.nome}
          <button class="btn btn-link mostrar-no-mapa"
            data-latitude="${resultado.latitude}"
            data-longitude="${resultado.longitude}">
            Mostrar no mapa
          </button>
        </li>`
    }

    // click nos botões "Mostrar no mapa"
    resultadosUlEl.addEventListener('click', mostrarNoMapa)
  }
}


function mostrarNoMapa(e) {
  // descobre se o click foi em um botão "Mostrar no mapa"
  const mostrarNoMapaClicado = e.target.matches('button.mostrar-no-mapa')
  if (!mostrarNoMapaClicado) return

  const botaoMostrarNoMapaEl = e.target

  // descobre lat/lon do item que queremos mostrar
  const latitude = botaoMostrarNoMapaEl.dataset.latitude
  const longitude = botaoMostrarNoMapaEl.dataset.longitude

  // converte lat/lon para coordenadas do mapa 
  const posicao = converteLatLonParaPorcentagem(latitude, longitude, window.campusAtual)

  // ativa e posiciona um marcador no mapa
  const mapaEl = document.body.classList.contains('mostrando-c1') ? document.querySelector('#mapa1') : document.querySelector('#mapa2')
  const marcadorEl = mapaEl.querySelector('.marcador-busca')
  marcadorEl.style.left = `calc(${posicao.x * 100}%)`;
  marcadorEl.style.top = `calc(${posicao.y * 100}%)`;
  marcadorEl.classList.add('visivel')

  // ativa a aba do mapa
  ativaAba('#btn-mapa-campus')
}